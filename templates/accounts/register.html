{% extends 'base.html' %}

{% block title %}Register - Healthcare System{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 2rem auto;">
    <h2 class="card-header">Register</h2>
    <form method="post">
        <div class="form-group">
            <label for="username">Username *</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="first_name">First Name *</label>
            <input type="text" id="first_name" name="first_name" required>
        </div>
        <div class="form-group">
            <label for="last_name">Last Name *</label>
            <input type="text" id="last_name" name="last_name" required>
        </div>
        <div class="form-group">
            <label for="password">Password *</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group">
            <label for="password2">Confirm Password *</label>
            <input type="password" id="password2" name="password2" required>
        </div>
        <div class="form-group">
            <label for="user_type">User Type *</label>
            <select id="user_type" name="user_type" required onchange="toggleFields()">
                <option value="">Select...</option>
                <option value="patient">Patient</option>
                <option value="doctor">Doctor</option>
            </select>
        </div>
        <div class="form-group">
            <label for="phone_number">Phone Number</label>
            <input type="text" id="phone_number" name="phone_number">
        </div>
        
        <!-- Doctor specific fields -->
        <div id="doctor-fields" style="display: none;">
            <div class="form-group">
                <label for="specialization">Specialization</label>
                <input type="text" id="specialization" name="specialization">
            </div>
            <div class="form-group">
                <label for="qualification">Qualification</label>
                <input type="text" id="qualification" name="qualification">
            </div>
            <div class="form-group">
                <label for="license_number">License Number</label>
                <input type="text" id="license_number" name="license_number">
            </div>
        </div>
        
        <!-- Patient specific fields -->
        <div id="patient-fields" style="display: none;">
            <div class="form-group">
                <label for="blood_group">Blood Group</label>
                <input type="text" id="blood_group" name="blood_group" placeholder="e.g., A+">
            </div>
            <div class="form-group">
                <label for="emergency_contact">Emergency Contact</label>
                <input type="text" id="emergency_contact" name="emergency_contact">
            </div>
        </div>
        
        <button type="submit" class="btn">Register</button>
    </form>
    <p style="margin-top: 1rem;">
        Already have an account? <a href="{% url 'accounts:login' %}">Login here</a>
    </p>
</div>

<script>
    function toggleFields() {
        var userType = document.getElementById('user_type').value;
        var doctorFields = document.getElementById('doctor-fields');
        var patientFields = document.getElementById('patient-fields');
        
        if (userType === 'doctor') {
            doctorFields.style.display = 'block';
            patientFields.style.display = 'none';
        } else if (userType === 'patient') {
            doctorFields.style.display = 'none';
            patientFields.style.display = 'block';
        } else {
            doctorFields.style.display = 'none';
            patientFields.style.display = 'none';
        }
    }
</script>
{% endblock %}
